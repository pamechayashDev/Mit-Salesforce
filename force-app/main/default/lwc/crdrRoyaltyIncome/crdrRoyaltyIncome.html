<!-- sldsValidatorIgnore -->
<template>

    <div if:true={incomeLoading} class="slds-spinner_container slds-is-relative">
        <lightning-spinner class="slds-is-relative" style="position: absolute; height: inherit"
            alternative-text="Loading..." variant="brand" size="medium">
        </lightning-spinner>
    </div>

    <div if:false={incomeLoading}>
        <article class="slds-card slds-card_boundary disclosure-cards slds-m-bottom_x-small">
            <c-card-header title={incomeLabel} icon-src={partnerFundAllocationIconUrl}></c-card-header>

            <template lwc:if={hasData}>
                <div class="slds-border_top">
                    <!-- 
                            To use onrowselection you have to show the checkboxes on table 
                            (and then if max-row-selection="1" is sent its only a radio so you can only select one)
                        -->
                    <lightning-datatable key-field="id" columns={incomeColumns} data={incomeRecords}
                            column-widths-mode="auto" wrap-text-max-lines="2"
                            onrowaction={handleRowAction}
                            hide-checkbox-column="true"
                            sorted-by={sortedBy} sorted-direction={sortDirection} onsort={onHandleSort}>
                    </lightning-datatable>
                </div>
            </template>
        </article>

        <div class="c-container slds-m-bottom_x-small">
            <lightning-layout padding="around-small" horizontal-align="end">
                <lightning-layout-item padding="around-small">
                    <div class="header-column">
                        &nbsp;
                        <p>Total Royalty Income (Level A)</p>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item padding="around-small">
                    <div class="header-column">
                        <strong>Total</strong>
                        <p>{ytdIncLvlA} </p>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </div>
    </div>
</template>